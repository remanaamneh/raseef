<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="description" content="Ù…Ù†ÙŠÙˆ Ø¹Ø§Ù„Ø±ØµÙŠÙ | Ø¹Ø±Ø§Ù‚ÙŠ/Ø¹Ø±Ø¨ÙŠ + Ø¹Ø¨Ø±ÙŠ â€” ØµÙˆØ± Ù„ÙƒÙ„ Ù…Ù†ØªØ¬."/>
  <link rel="icon" href="shop.png"/>
  <meta property="og:title" content="Ø¹Ø§Ù„Ø±ØµÙŠÙ | Ø§Ù„Ù…Ù†ÙŠÙˆ"/>
  <meta property="og:description" content="Ù…Ù†ÙŠÙˆ Ø¹Ø±Ø¨ÙŠ + Ø¹Ø¨Ø±ÙŠ Ù…Ø¹ ØµÙˆØ± Ù„ÙƒÙ„ Ù…Ù†ØªØ¬."/>
  <meta property="og:image" content="shop.png"/>
  <meta property="og:type" content="website"/>
  <meta name="twitter:card" content="summary_large_image"/>
  <title>Ø¹Ø§Ù„Ø±ØµÙŠÙ | Ø§Ù„Ù…Ù†ÙŠÙˆ</title>
  <meta name="theme-color" content="#0c0c0f"/>
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
  <style>
    :root{
      --bg:#0c0c0f;
      --text:#f7f7fb;
      --muted:#b9bbc6;
      --muted2:#8f92a4;
      --accent:#f0c36a;
      --border:rgba(255,255,255,.10);
      --shadow: 0 18px 60px rgba(0,0,0,.55);
      --r: 22px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 15% -10%, rgba(240,195,106,.22), transparent 60%),
        radial-gradient(900px 560px at 95% 5%, rgba(255,255,255,.06), transparent 55%),
        radial-gradient(900px 700px at 50% 110%, rgba(209,166,90,.15), transparent 55%),
        var(--bg);
      padding-bottom:92px;
    }
    /* ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø®Ù„ÙÙŠØ© Ø®Ø§ØµØ© Ù„Ù‚Ø³Ù… Ø§Ù„Ù…ÙŠÙ„Ùƒ Ø´ÙŠÙƒ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø¨ */
    .wrap{max-width:1120px; margin:0 auto; padding:0 16px}
    header{
      position:sticky; top:0; z-index:30;
      background: rgba(12,12,15,.78);
      backdrop-filter: blur(14px);
      border-bottom:1px solid var(--border);
    }
    .top{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      padding:14px 0;
      flex-wrap:wrap;
    }
    .brand{display:flex; align-items:center; gap:12px}
    .logo{
      width:44px; height:44px; border-radius:14px;
      background: linear-gradient(135deg, rgba(240,195,106,.25), rgba(240,195,106,.06));
      border:1px solid rgba(240,195,106,.28);
      display:grid; place-items:center;
      box-shadow: 0 12px 30px rgba(0,0,0,.35);
    }
    .logo span{font-size:20px}
    .brand h1{margin:0; font-size:18px}
    .brand p{margin:2px 0 0; color:var(--muted); font-size:12.5px}
    .actions{display:flex; gap:10px; flex-wrap:wrap}
    .btn{
      border:1px solid var(--border);
      background: rgba(255,255,255,.06);
      color: var(--text);
      padding:10px 12px;
      border-radius: 999px;
      text-decoration:none;
      font-size:13px;
      cursor:pointer;
      user-select:none;
    }
    .btn.primary{
      border-color: rgba(240,195,106,.55);
      background: rgba(240,195,106,.16);
    }
    .hero{padding:14px 0 6px}
    .heroCard{
      border:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.03));
      border-radius: var(--r);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .heroInner{
      padding:14px;
      display:flex; gap:12px; align-items:center; justify-content:space-between;
      flex-wrap:wrap;
    }
    .search{
      flex:1; min-width:240px;
      display:flex; gap:10px; align-items:center;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.24);
      padding:10px 12px;
      border-radius: 16px;
    }
    .search input{
      width:100%;
      border:0; outline:0;
      background: transparent;
      color: var(--text);
      font-size:14px;
    }
    .chipRow{
      display:flex; gap:10px; flex-wrap:wrap;
    }
    .chip{
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.22);
      color: var(--muted);
      padding:9px 12px;
      border-radius: 999px;
      font-size:12.5px;
      cursor:pointer;
      white-space:nowrap;
    }
    .chip .he{opacity:.85}
    .chip.active{
      border-color: rgba(240,195,106,.55);
      background: rgba(240,195,106,.14);
      color: var(--text);
    }
    .sectionTitle{
      margin:14px 0 10px;
      display:flex; align-items:baseline; justify-content:space-between; gap:10px;
      flex-wrap:wrap;
    }
    .sectionTitle h2{margin:0; font-size:16px}
    .sectionTitle span{color:var(--muted2); font-size:12.5px}

    .grid{
      display:grid; gap:14px;
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
    @media (min-width:760px){
      .grid{grid-template-columns: repeat(3, minmax(0, 1fr));}
    }
    @media (min-width:1040px){
      .grid{grid-template-columns: repeat(4, minmax(0, 1fr));}
    }

    .card{
      border:1px solid var(--border);
      background: rgba(255,255,255,.04);
      border-radius: 18px;
      overflow:hidden;
      box-shadow: 0 16px 40px rgba(0,0,0,.45);
      transition: transform .15s ease, border-color .15s ease, background .15s ease;
      cursor:pointer;
    }
    .card:hover{transform: translateY(-2px); border-color: rgba(240,195,106,.35); background: rgba(255,255,255,.05)}
    .thumb{
      height:150px;
      background: rgba(0,0,0,.22);
      border-bottom:1px solid rgba(255,255,255,.10);
      padding:10px;
      display:grid;
      place-items:stretch;
    }
    .thumb img{width:100%; height:100%; object-fit:cover; border-radius:14px}
    .body{padding:12px 12px 14px}
    .nameAr{margin:0; font-size:13.5px; line-height:1.35}
    .nameHe{margin:6px 0 0; font-size:12.8px; line-height:1.25; color:var(--muted); direction:ltr; text-align:left}
    .meta{
      margin-top:10px;
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .price{
      color: var(--text);
      font-weight: 800;
      letter-spacing:.2px;
    }
    .catPill{
      font-size:11.5px;
      color: var(--muted);
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      padding:6px 10px;
      border-radius: 999px;
      white-space:nowrap;
    }
    .bottomBar{
      position:fixed; left:0; right:0; bottom:0;
      background: rgba(12,12,15,.82);
      backdrop-filter: blur(14px);
      border-top:1px solid var(--border);
      z-index:40;
    }
    .bottomInner{
      max-width:1120px; margin:0 auto;
      padding:12px 16px;
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      flex-wrap:wrap;
    }
    .small{color:var(--muted); font-size:12.5px}
    .footerLinks{display:flex; gap:10px; flex-wrap:wrap}

    .modal{
      position:fixed; inset:0;
      background: rgba(0,0,0,.78);
      display:none;
      z-index:80;
      padding:18px;
    }
    .modal.open{display:flex}
    .modalCard{
      margin:auto;
      width:min(980px, 100%);
      border:1px solid rgba(255,255,255,.14);
      border-radius: 22px;
      overflow:hidden;
      background: rgba(12,12,14,.92);
      box-shadow: var(--shadow);
    }
    .modalTop{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      padding:12px 14px;
      border-bottom:1px solid rgba(255,255,255,.10);
    }
    .modalTop strong{font-size:14px}
    .modalTop button{
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: var(--text);
      padding:9px 12px;
      border-radius: 12px;
      cursor:pointer;
      font-size:13px;
    }
    .modalImg img{width:100%; height:auto; display:block; background:#000}
  </style>
</head>
<body>
  <header>
    <div class="wrap top">
      <div class="brand">
        <div class="logo" aria-hidden="true"><span>â˜€ï¸</span></div>
        <div>
          <h1>Ø¹Ø§Ù„Ø±ØµÙŠÙ</h1>
        </div>
      </div>
      <div class="actions">
        <button class="btn primary" id="shareBtn">ğŸ”— Ù…Ø´Ø§Ø±ÙƒØ©</button>
        <button class="btn" id="openGalleryBtn">ğŸ–¼ï¸ Ø§Ù„Ù…Ù†ÙŠÙˆ Ø§Ù„Ø£ØµÙ„ÙŠ</button>
        <button class="btn" id="showQRBtn">ğŸ“± QR Code</button>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="hero">
      <div class="heroCard">
        <div class="heroInner">
          <div class="search" role="search">
            ğŸ” <input id="q" placeholder="Ø§Ø¨Ø­Ø«ÙŠâ€¦ / ×—×™×¤×•×©â€¦ (Ù…Ø«Ø§Ù„: Ù„ÙˆØªØ³ / ×œ×•×˜×•×¡)" />
          </div>
          <div class="chipRow" id="chips"></div>
        </div>
      </div>
    </section>

    <div class="sectionTitle">
      <h2 id="title">ÙƒÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h2>
      <span id="count"></span>
    </div>

    <section class="grid" id="grid"></section>
  </main>

  <div class="bottomBar" role="navigation" aria-label="Ø´Ø±ÙŠØ· Ø³Ø±ÙŠØ¹">
    <div class="bottomInner">
      <div class="small">Ø§Ù…Ø³Ø­ÙŠ QR â†’ ÙŠÙØªØ­ Ø§Ù„Ù…Ù†ÙŠÙˆ ÙÙˆØ±Ù‹Ø§ âœ…</div>
      <div class="footerLinks">
        <a class="btn primary" href="#" id="toTop">â¬†ï¸ Ù„Ù„Ø£Ø¹Ù„Ù‰</a>
        <a class="btn" href="shop.png" target="_blank" rel="noopener">ğŸ  ØµÙˆØ±Ø© Ø§Ù„Ù…Ø­Ù„</a>
      </div>
    </div>
  </div>

  <div class="modal" id="modal" aria-hidden="true">
    <div class="modalCard" role="dialog" aria-modal="true">
      <div class="modalTop">
        <strong id="modalTitle">Ø¹Ø±Ø¶</strong>
        <button type="button" id="closeModal">Ø¥ØºÙ„Ø§Ù‚ âœ•</button>
      </div>
      <div class="modalImg">
        <img id="modalImg" src="" alt="" decoding="async" loading="lazy"/>
      </div>
    </div>
  </div>

  <div class="modal" id="qrModal" aria-hidden="true">
    <div class="modalCard" role="dialog" aria-modal="true" style="max-width: 400px;">
      <div class="modalTop">
        <strong>QR Code - Ù…Ø³Ø­ Ù„ÙØªØ­ Ø§Ù„Ù…Ù†ÙŠÙˆ</strong>
        <button type="button" id="closeQRModal">Ø¥ØºÙ„Ø§Ù‚ âœ•</button>
      </div>
      <div style="padding: 24px; text-align: center; background: #fff;">
        <div id="qrInputContainer" style="margin-bottom: 16px; display: none;">
          <input type="text" id="qrUrlInput" placeholder="https://remanaamneh.github.io/raseef/" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; font-size: 13px; margin-bottom: 8px;" />
          <button class="btn" style="background: rgba(240,195,106,.16); border-color: rgba(240,195,106,.55);" id="generateQRBtn">Ø¥Ù†Ø´Ø§Ø¡ QR Code</button>
        </div>
        <canvas id="qrCanvas" style="max-width: 100%; height: auto; display: block; margin: 0 auto;"></canvas>
        <p style="margin-top: 16px; color: #333; font-size: 13px; word-break: break-all;" id="qrUrl"></p>
        <p id="qrWarning" style="margin-top: 12px; padding: 10px; background: rgba(255,193,7,.15); border: 1px solid rgba(255,193,7,.4); border-radius: 8px; color: #333; font-size: 12px; display: none;"></p>
        <button class="btn" style="margin-top: 12px; background: rgba(240,195,106,.16); border-color: rgba(240,195,106,.55);" id="copyQRUrl">ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·</button>
      </div>
    </div>
  </div>

  <script src="menu-data.js"></script>
  <script>
    const data = window.MENU_DATA || [];
    const grid = document.getElementById('grid');
    const chips = document.getElementById('chips');
    const q = document.getElementById('q');
    const title = document.getElementById('title');
    const count = document.getElementById('count');

    const modal = document.getElementById('modal');
    const modalImg = document.getElementById('modalImg');
    const modalTitle = document.getElementById('modalTitle');

    let activeCat = "Ø§Ù„ÙƒÙ„";

    function flatItems(){
      const out = [];
      data.forEach(section=>{
        section.items.forEach(it=>{
          out.push({
            cat_ar: section.cat_ar,
            cat_he: section.cat_he,
            defaultPrice: section.price,
            name_ar: it.name_ar,
            name_he: it.name_he,
            note: it.note || "",
            img: it.img
          });
        });
      });
      return out;
    }

    function cats(){
      return ["Ø§Ù„ÙƒÙ„", ...data.map(s=> s.cat_ar + " | " + s.cat_he)];
    }

    function renderChips(){
      chips.innerHTML = "";
      cats().forEach(c=>{
        const b = document.createElement('button');
        b.className = 'chip' + (c===activeCat ? ' active':'');
        if(c==="Ø§Ù„ÙƒÙ„"){
          b.innerHTML = `Ø§Ù„ÙƒÙ„ <span class="he">| ×”×›×œ</span>`;
        }else{
          const parts = c.split(" | ");
          b.innerHTML = `${parts[0]} <span class="he">| ${parts[1]}</span>`;
        }
        b.onclick = ()=>{ activeCat=c; render(); };
        chips.appendChild(b);
      });
    }

    function matches(item, query){
      if(!query) return true;
      const s = (item.name_ar + " " + item.name_he + " " + item.cat_ar + " " + item.cat_he).toLowerCase();
      return s.includes(query.toLowerCase());
    }

    function openModal(src, t){
      modal.classList.add('open');
      modal.setAttribute('aria-hidden','false');
      modalImg.src = src;
      modalImg.alt = t || '';
      modalTitle.textContent = t || 'Ø¹Ø±Ø¶';
      document.body.style.overflow = 'hidden';
    }
    function closeModal(){
      modal.classList.remove('open');
      modal.setAttribute('aria-hidden','true');
      modalImg.src = '';
      document.body.style.overflow = '';
    }

    document.getElementById('closeModal').onclick = closeModal;
    modal.addEventListener('click', (e)=>{ if(e.target===modal) closeModal(); });
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeModal(); });

    document.getElementById('openGalleryBtn').onclick = ()=> openModal('menu-original.png', 'Ø§Ù„Ù…Ù†ÙŠÙˆ Ø§Ù„Ø£ØµÙ„ÙŠ');
    document.getElementById('toTop').onclick = (e)=>{ e.preventDefault(); window.scrollTo({top:0, behavior:'smooth'}); };

    // QR Code functionality
    const qrModal = document.getElementById('qrModal');
    const qrCanvas = document.getElementById('qrCanvas');
    const qrUrl = document.getElementById('qrUrl');
    const showQRBtn = document.getElementById('showQRBtn');
    const closeQRModal = document.getElementById('closeQRModal');
    const copyQRUrlBtn = document.getElementById('copyQRUrl');

    function generateQRCode() {
      const currentUrl = window.location.href;
      qrUrl.textContent = currentUrl;
      const qrWarning = document.getElementById('qrWarning');
      
      // Check if running locally
      const isLocal = currentUrl.startsWith('file://') || 
                     currentUrl.startsWith('http://localhost') || 
                     currentUrl.startsWith('http://127.0.0.1') ||
                     currentUrl.includes('localhost');
      
      if (isLocal) {
        qrWarning.style.display = 'block';
        qrWarning.textContent = 'âš ï¸ Ù„Ù„Ø¹Ù…Ù„ Ù…Ù† Ø£Ø¬Ù‡Ø²Ø© Ø£Ø®Ø±Ù‰ØŒ ÙŠØ¬Ø¨ Ø±ÙØ¹ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¹Ù„Ù‰ Ø®Ø§Ø¯Ù… (server) Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø®Ø¯Ù…Ø© ×›××• GitHub Pages';
      } else {
        qrWarning.style.display = 'none';
      }
      
      // Remove any existing fallback images
      const existingImg = qrCanvas.parentNode.querySelector('img[data-qr-fallback]');
      if (existingImg) {
        existingImg.remove();
      }
      
      // Function to use fallback API
      function useFallbackQR(url) {
        const qrApiUrl = 'https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=' + encodeURIComponent(url);
        qrCanvas.style.display = 'none';
        const img = document.createElement('img');
        img.setAttribute('data-qr-fallback', 'true');
        img.src = qrApiUrl;
        img.style.maxWidth = '100%';
        img.style.height = 'auto';
        img.style.display = 'block';
        img.style.margin = '0 auto';
        img.alt = 'QR Code';
        qrCanvas.parentNode.insertBefore(img, qrCanvas.nextSibling);
      }
      
      // Check if QRCode library is loaded
      if (typeof QRCode === 'undefined') {
        console.error('QRCode library not loaded, using fallback API...');
        useFallbackQR(currentUrl);
        return;
      }
      
      // Set canvas size explicitly
      qrCanvas.width = 300;
      qrCanvas.height = 300;
      qrCanvas.style.display = 'block';
      
      // Clear canvas with white background
      const ctx = qrCanvas.getContext('2d');
      ctx.fillStyle = '#FFFFFF';
      ctx.fillRect(0, 0, qrCanvas.width, qrCanvas.height);
      
      // Generate QR code
      try {
        QRCode.toCanvas(qrCanvas, currentUrl, {
          width: 300,
          margin: 2,
          color: {
            dark: '#000000',
            light: '#FFFFFF'
          }
        }, function (error) {
          if (error) {
            console.error('QR Code generation error:', error);
            useFallbackQR(currentUrl);
            qrWarning.style.display = isLocal ? 'block' : 'none';
          } else {
            console.log('QR Code generated successfully for:', currentUrl);
            qrWarning.style.display = isLocal ? 'block' : 'none';
          }
        });
      } catch (error) {
        console.error('QR Code generation exception:', error);
        useFallbackQR(currentUrl);
        qrWarning.style.display = isLocal ? 'block' : 'none';
      }
    }

    function openQRModal() {
      qrModal.classList.add('open');
      qrModal.setAttribute('aria-hidden', 'false');
      document.body.style.overflow = 'hidden';
      
      // Wait a bit to ensure modal is visible before generating QR
      setTimeout(() => {
        generateQRCode();
      }, 100);
    }

    function closeQRModalFunc() {
      qrModal.classList.remove('open');
      qrModal.setAttribute('aria-hidden', 'true');
      document.body.style.overflow = '';
    }

    showQRBtn.onclick = openQRModal;
    closeQRModal.onclick = closeQRModalFunc;
    qrModal.addEventListener('click', (e) => {
      if (e.target === qrModal) closeQRModalFunc();
    });
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && qrModal.classList.contains('open')) {
        closeQRModalFunc();
      }
    });

    // Handle generate QR button click
    const generateQRBtn = document.getElementById('generateQRBtn');
    const qrUrlInput = document.getElementById('qrUrlInput');
    if (generateQRBtn) {
      generateQRBtn.onclick = () => {
        const inputUrl = qrUrlInput.value.trim();
        if (inputUrl && (inputUrl.startsWith('http://') || inputUrl.startsWith('https://'))) {
          generateQRCode(inputUrl);
        } else {
          alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ø§Ø¨Ø· ØµØ­ÙŠØ­ ÙŠØ¨Ø¯Ø£ Ø¨Ù€ http:// Ø£Ùˆ https://');
        }
      };
    }

    copyQRUrlBtn.onclick = async () => {
      const urlToCopy = qrUrl.textContent || window.location.href;
      try {
        await navigator.clipboard.writeText(urlToCopy);
        copyQRUrlBtn.textContent = 'âœ… ØªÙ… Ø§Ù„Ù†Ø³Ø®!';
        setTimeout(() => {
          copyQRUrlBtn.textContent = 'ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·';
        }, 2000);
      } catch (err) {
        // Fallback for older browsers
        const textArea = document.createElement('textarea');
        textArea.value = urlToCopy;
        textArea.style.position = 'fixed';
        textArea.style.opacity = '0';
        document.body.appendChild(textArea);
        textArea.select();
        try {
          document.execCommand('copy');
          copyQRUrlBtn.textContent = 'âœ… ØªÙ… Ø§Ù„Ù†Ø³Ø®!';
          setTimeout(() => {
            copyQRUrlBtn.textContent = 'ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·';
          }, 2000);
        } catch (err) {
          alert('Ø§Ù„Ø±Ø§Ø¨Ø·: ' + window.location.href);
        }
        document.body.removeChild(textArea);
      }
    };

    async function share(){
      const url = window.location.href;
      try{
        if(navigator.share){
          await navigator.share({title:'Ù…Ù†ÙŠÙˆ Ø¹Ø§Ù„Ø±ØµÙŠÙ', text:'Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ù†ÙŠÙˆ', url});
        }else{
          await navigator.clipboard.writeText(url);
          alert('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· âœ…');
        }
      }catch(e){}
    }
    document.getElementById('shareBtn').onclick = share;

    function render(){
      const query = q.value.trim();
      const items = flatItems()
        .filter(it => activeCat==="Ø§Ù„ÙƒÙ„" ? true : (it.cat_ar + " | " + it.cat_he)===activeCat)
        .filter(it => matches(it, query));

      if(activeCat==="Ø§Ù„ÙƒÙ„"){
        title.textContent = "ÙƒÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª";
      }else{
        const parts = activeCat.split(" | ");
        title.textContent = parts[0] + " | " + parts[1];
      }
      // Ø®Ù„ÙÙŠØ© Ø§Ù„Ù…ÙŠÙ„Ùƒ Ø´ÙŠÙƒ Ø§Ù„Ø®Ø§ØµØ© ØªÙ… Ø¥Ù„ØºØ§Ø¤Ù‡Ø§

      count.textContent = items.length ? (items.length + " Ù…Ù†ØªØ¬") : "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬";

      grid.innerHTML = "";
      items.forEach(it=>{
        const card = document.createElement('article');
        card.className = 'card';
        card.innerHTML = `
          <div class="thumb">
            <img src="${it.img}" alt="" loading="lazy" decoding="async">
          </div>
          <div class="body">
            <p class="nameAr">${it.name_ar}</p>
            <p class="nameHe">${it.name_he}</p>
            <div class="meta">
              <span class="price">${(it.note ? it.note : it.defaultPrice) || 'â€”'}</span>
              <span class="catPill">${it.cat_ar}</span>
            </div>
          </div>
        `;
        card.onclick = ()=> openModal(it.img, it.name_ar + " | " + it.name_he);
        grid.appendChild(card);
      });
    }

    q.addEventListener('input', render);
    renderChips();
    render();

    // ×‘×“×™×§×ª ×ª×§×™× ×•×ª ×ª××•× ×•×ª
    function validateImages() {
      const missingImages = [];
      const allItems = flatItems();
      
      allItems.forEach(item => {
        if (item.img) {
          // ×‘×“×™×§×” ×©×”× ×ª×™×‘ ×™×—×¡×™ ×•×œ× ××§×•××™
          if (item.img.match(/^(C:|D:|file:\/\/|Users\/|OneDrive\/)/i)) {
            console.warn('âš ï¸ × ×ª×™×‘ ××§×•××™ × ××¦×:', item.img, '(', item.name_ar, ')');
            missingImages.push({ path: item.img, name: item.name_ar });
          }
        }
      });

      // ×‘×“×™×§×” ×©×”×ª××•× ×•×ª × ×˜×¢× ×•×ª ×‘×”×¦×œ×—×”
      let checkedCount = 0;
      const totalImages = allItems.length;
      
      allItems.forEach(item => {
        if (item.img) {
          const img = new Image();
          img.onload = () => {
            checkedCount++;
            if (checkedCount === totalImages) {
              console.log(`âœ… ×›×œ ×”×ª××•× ×•×ª × ×˜×¢× ×• ×‘×”×¦×œ×—×” (${totalImages} ×ª××•× ×•×ª)`);
            }
          };
          img.onerror = () => {
            console.warn('âŒ ×ª××•× ×” ×—×¡×¨×” ××• ×œ× × ×˜×¢× ×”:', item.img, '(', item.name_ar, ')');
            missingImages.push({ path: item.img, name: item.name_ar });
            checkedCount++;
            if (checkedCount === totalImages && missingImages.length > 0) {
              console.warn(`âš ï¸ × ××¦××• ${missingImages.length} ×ª××•× ×•×ª ×—×¡×¨×•×ª`);
            }
          };
          img.src = item.img;
        } else {
          checkedCount++;
        }
      });

      // ×‘×“×™×§×” ×©×”×ª×™×§×™×™×” assets/photos ×§×™×™××ª (×‘×“×™×§×” ×‘×¡×™×¡×™×ª)
      console.log('ğŸ“ ×‘×“×™×§×ª ××‘× ×” ×ª×™×§×™×•×ª:');
      console.log('  - assets/photos/ (×›×œ ×”× ×ª×™×‘×™× ××¦×‘×™×¢×™× ×œ×›××Ÿ)');
      
      return missingImages;
    }

    // ×”×¨×¦×ª ×‘×“×™×§×ª ×ª×§×™× ×•×ª ×œ××—×¨ ×˜×¢×™× ×ª ×”×“×£
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', () => {
        setTimeout(validateImages, 1000); // ×”××ª×Ÿ ×§×¦×ª ×œ×˜×¢×™× ×ª ×”×ª××•× ×•×ª
      });
    } else {
      setTimeout(validateImages, 1000);
    }
  </script>
</body>
</html>
